<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Библиотека АРБ</title><style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#2c3e50;--secondary:#3498db;--success:#27ae60;--danger:#e74c3c;--light:#ecf0f1;--dark:#2c3e50;--border-radius:12px;--transition:all .3s ease}body{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background:#0ABAB5;min-height:100vh;padding:20px;color:var(--dark)}.container{max-width:1200px;margin:0 auto}header{background:white;padding:30px;border-radius:var(--border-radius);box-shadow:0 10px 30px rgba(0,0,0,.1);margin-bottom:30px;text-align:center;display:flex;flex-direction:column;align-items:center}.header-logo{max-width:200px;height:auto;margin-bottom:20px;object-fit:contain}h1{font-size:2.5em;color:var(--primary);margin-bottom:10px}.subtitle{color:#7f8c8d;font-size:1.1em}.login-bar{width:100%;max-width:440px;margin-top:20px;padding:10px 15px;border-radius:999px;background:#f8f9fb;border:1px solid #dde3ea;display:flex;align-items:center;gap:8px;font-size:.9em}.login-status{display:flex;align-items:center;gap:6px;color:#7f8c8d;margin-right:auto}.login-dot{width:8px;height:8px;border-radius:50%;background:#95a5a6}.login-dot.admin{background:#27ae60}.login-input{border-radius:999px;border:1px solid #dfe6ee;padding:4px 8px;font-size:.85em;width:90px}.login-input::placeholder{color:#b0b8c2}.login-btn{border-radius:999px;border:none;padding:6px 10px;font-size:.85em;font-weight:600;cursor:pointer;background:rgba(52,152,219,.12);color:var(--secondary);border:1px solid rgba(52,152,219,.6);transition:var(--transition)}.login-btn:hover{background:rgba(52,152,219,.22);transform:translateY(-1px)}.login-btn.logout{background:rgba(231,76,60,.1);color:#e74c3c;border-color:rgba(231,76,60,.6)}.login-btn.logout:hover{background:rgba(231,76,60,.2)}.books-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:25px;margin-bottom:30px}.book-card{background:white;padding:25px;border-radius:var(--border-radius);box-shadow:0 5px 15px rgba(0,0,0,.08);transition:var(--transition)}.book-card:hover{transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,0,0,.15)}.book-card h3{color:var(--primary);margin-bottom:10px;font-size:1.3em}.book-card .author{color:#7f8c8d;margin-bottom:15px;font-style:italic}.status-badge{display:inline-block;padding:8px 16px;border-radius:20px;font-size:.9em;font-weight:600;margin-bottom:15px}.status-badge.available{background:rgba(39,174,96,.15);color:var(--success)}.status-badge.unavailable{background:rgba(231,76,60,.15);color:var(--danger)}.delete-btn{width:100%;padding:10px;background:var(--danger);color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:var(--transition);display:none}.delete-btn:hover{background:#c0392b;transform:scale(1.02)}.admin-mode .delete-btn{display:block}.controls{background:white;padding:25px;border-radius:var(--border-radius);box-shadow:0 10px 30px rgba(0,0,0,.1);display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:15px;align-items:flex-end}.form-group{display:flex;flex-direction:column}label{font-weight:600;margin-bottom:8px;color:var(--dark)}input,select{padding:12px;border:2px solid var(--light);border-radius:8px;font-size:1em;transition:var(--transition)}input:focus,select:focus{outline:none;border-color:var(--secondary);box-shadow:0 0 0 3px rgba(52,152,219,.1)}.add-btn{padding:12px 30px;background:var(--success);color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:1em;transition:var(--transition)}.add-btn:hover{background:#229954;transform:scale(1.05)}@media (max-width:768px){.books-grid{grid-template-columns:1fr}.controls{grid-template-columns:1fr;gap:15px}.add-btn{width:100%}}</style></head><body><div class="container"><header><img src="logo.png" alt="Логотип АРБ" class="header-logo"><h1>Библиотека АРБ</h1><p class="subtitle">Общая коллекция книг АРБ</p><div class="login-bar"><div class="login-status"><div class="login-dot" id="statusDot"></div><span id="statusText">Режим просмотра (удаление недоступно)</span></div><input type="text" class="login-input" id="loginInput" placeholder="Логин"><input type="password" class="login-input" id="passwordInput" placeholder="Пароль"><button class="login-btn" id="loginBtn" onclick="toggleAdmin()">Войти</button></div></header><div class="books-grid" id="booksContainer"></div><div class="controls"><div class="form-group"><label for="bookTitle">Название книги</label><input type="text" id="bookTitle" placeholder="Например: Мастер и Маргарита"></div><div class="form-group"><label for="bookAuthor">Автор</label><input type="text" id="bookAuthor" placeholder="Например: Булгаков"></div><div class="form-group"><label for="bookStatus">Статус</label><select id="bookStatus"><option value="Доступна">Доступна</option><option value="Недоступна">Недоступна</option></select></div><button class="add-btn" onclick="addBook()">+ Добавить книгу</button></div></div><script>const API_URL='https://script.google.com/macros/s/AKfycbzEpsnmAJPz5i054Ay8tziLWeUNP4AzH6o2reI3jLbY9-1OIz7zxX9rrIs4iBag1ojSYQ/exec';let isAdmin=false;async function loadBooks(){try{const response=await fetch(API_URL);const books=await response.json();renderBooks(books)}catch(error){console.error('Ошибка загрузки книг:',error);const fallbackBooks=[{id:1,title:'Мастер и Маргарита',author:'М. Булгаков',year:'1967',genre:'Доступна'},{id:2,title:'1984',author:'Дж. Оруэлл',year:'1949',genre:'Недоступна'},{id:3,title:'Преступление и наказание',author:'Ф. Достоевский',year:'1866',genre:'Доступна'}];renderBooks(fallbackBooks)}}function renderBooks(books){const container=document.getElementById('booksContainer');container.innerHTML='';books.forEach(book=>{const card=document.createElement('div');card.className='book-card';const statusClass=book.genre==='Доступна'?'available':'unavailable';card.innerHTML=`<h3>${book.title}</h3><p class="author">${book.author}</p><span class="status-badge ${statusClass}">${book.genre}</span><button class="delete-btn" onclick="deleteBook(${book.id})">Отметить как ${book.genre==='Доступна'?'недоступную':'доступную'}</button>`;container.appendChild(card)})}async function addBook(){const title=document.getElementById('bookTitle').value;const author=document.getElementById('bookAuthor').value;const status=document.getElementById('bookStatus').value;if(!title||!author){alert('Пожалуйста, заполните название и автора');return}try{const response=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:'add',title:title,author:author,year:new Date().getFullYear().toString(),genre:status})});const result=await response.json();if(result.success){document.getElementById('bookTitle').value='';document.getElementById('bookAuthor').value='';await loadBooks()}else{alert('Ошибка добавления книги')}}catch(error){console.error('Ошибка:',error);alert('Ошибка добавления книги')}}async function deleteBook(id){if(!confirm('Изменить статус книги?'))return;try{const response=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:'delete',id:id})});const result=await response.json();if(result.success){await loadBooks()}else{alert('Ошибка изменения статуса')}}catch(error){console.error('Ошибка:',error);alert('Ошибка изменения статуса')}}function toggleAdmin(){const login=document.getElementById('loginInput').value;const password=document.getElementById('passwordInput').value;if(!isAdmin){if(login==='admin'&&password==='admin'){isAdmin=true;document.body.classList.add('admin-mode');document.getElementById('statusDot').classList.add('admin');document.getElementById('statusText').textContent='Режим администратора';document.getElementById('loginBtn').textContent='Выйти';document.getElementById('loginBtn').classList.add('logout')}else{alert('Неверный логин или пароль')}}else{isAdmin=false;document.body.classList.remove('admin-mode');document.getElementById('statusDot').classList.remove('admin');document.getElementById('statusText').textContent='Режим просмотра (удаление недоступно)';document.getElementById('loginBtn').textContent='Войти';document.getElementById('loginBtn').classList.remove('logout');document.getElementById('loginInput').value='';document.getElementById('passwordInput').value=''}}loadBooks()</script></body></html>
